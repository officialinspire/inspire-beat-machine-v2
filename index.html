<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Inspire Beat Machine</title>
  <!-- Import the required fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/style.css">
  <script src="/moment.min.js"></script>
  <script src="/moment-timezone.js"></script>
</head>
<body>
  <!-- Sidebar Navigation -->
  <nav class="sidebar">
    <a href="https://192.168.0.136" class="sidebar-button">üè† HOME</a>
    <a href="https://192.168.0.136:3000/" class="sidebar-button">üì° MESHTASTIC</a>
    <a href="http://192.168.0.136:1880/ui/" class="sidebar-button">üîÑ NODE-RED</a>
    <a href="/index.html" class="sidebar-button">üõ†Ô∏è TEAM TOOLS</a>
    <a href="https://192.168.0.136:8080/" class="sidebar-button">üóÑÔ∏è ARCHIVE</a>
    <a href="https://192.168.0.136:9000/" class="sidebar-button">‚öôÔ∏è ADMIN PANEL</a>
  </nav>

  <!-- Mobile Top Menu (fixed to top, shown only on mobile) -->
  <div class="mobile-top-menu">
    <div class="mobile-menu-btn">‚ò∞</div>
    <div class="mobile-title">Beat Machine</div>
    <div class="playback-indicator" id="mobile-playback-status"></div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="inspire-interface">
      <!-- Interface Header with Logo -->
      <div class="interface-header">
        <div class="inspire-logo">
          <img src="inspire-logo.png" alt="INSPIRE Logo" class="logo-img">
        </div>
        <div class="interface-title">
          <h1>Beat Machine</h1>
          <div class="subtitle">Create beats and rhythms</div>
        </div>
        <div class="playback-status" id="playback-status">Paused</div>
      </div>

      <!-- Interface Status Bar -->
      <div class="status-bar">
        <div class="status-indicator online">Ready</div>
        <div class="status-dots">
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>
        <div class="status-code" id="header-info">Team Inspire</div>
      </div>
      
      <!-- Beat Machine Module -->
      <div class="beat-machine-module">
        <!-- Section Selector -->
        <div class="section-selector">
          <h2 class="module-title">Pattern Sections</h2>
          <div class="section-tabs">
            <button class="section-tab active" data-section="main">Main</button>
            <button class="section-tab" data-section="intro">Intro</button>
            <button class="section-tab" data-section="verse">Verse</button>
            <button class="section-tab" data-section="chorus">Chorus</button>
            <button class="section-tab" data-section="outro">Outro</button>
          </div>
        </div>

        <!-- Controls Panel -->
        <div class="module-container">
          <h2 class="module-title">Playback Controls</h2>
          <div class="controls-panel">
            <div class="control-group tempo-group">
              <div class="control-label">Tempo</div>
              <div class="tempo-display">
                <div class="tempo-value" id="tempo-value">120</div>
                <div class="tempo-label">BPM</div>
              </div>

              <div class="tempo-controls">
                <div class="tempo-slider-container">
                  <input type="range" min="60" max="200" value="120" class="tempo-slider" id="tempo-slider">
                </div>
                <div class="tempo-buttons">
                  <button id="tempo-down" class="control-btn">-</button>
                  <button id="tempo-up" class="control-btn">+</button>
                </div>
              </div>
            </div>

            <div class="control-group playback-group">
              <div class="control-label">Playback</div>
              <div class="playback-controls">
                <button id="play-pause" class="control-btn primary large">
                  <span class="play-icon">‚ñ∂</span>
                </button>
              </div>
            </div>

            <div class="control-group pattern-group">
              <div class="control-label">Pattern</div>
              <div class="pattern-controls">
                <button id="clear" class="control-btn wide">Clear</button>
                <button id="random" class="control-btn wide">Random</button>
                <button id="export" class="control-btn wide">Export</button>
                <a id="download_link" style="display:none"></a>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Beat Grid -->
        <div class="beat-maker-wrap">
          <h2 class="module-title">Beat Grid (6x6)</h2>
          <div class="grid-instructions" style="text-align: center; margin-bottom: 16px; color: var(--text-secondary); font-size: 0.875rem;">
            Click cells to toggle beats ‚Ä¢ Right-click to change sound mapping
          </div>

          <!-- Mobile Instrument Select -->
          <div class="mobile-instrument-select">
            <label for="mobile-instrument-dropdown">Instrument:</label>
            <select id="mobile-instrument-dropdown" class="option-select"></select>
          </div>
          
          <div class="beat-maker-container">
            <div class="instrument-labels">
              <div class="instrument-label" data-instrument="bass_drum">Bass Drum</div>
              <div class="instrument-label" data-instrument="snare_drum">Snare Drum</div>
              <div class="instrument-label" data-instrument="low_tom">Low Tom</div>
              <div class="instrument-label" data-instrument="mid_tom">Mid Tom</div>
              <div class="instrument-label" data-instrument="hi_tom">Hi Tom</div>
              <div class="instrument-label" data-instrument="rim_shot">Rim Shot</div>
              <div class="instrument-label" data-instrument="hand_clap">Hand Clap</div>
              <div class="instrument-label" data-instrument="cowbell">Cowbell</div>
              <div class="instrument-label" data-instrument="cymbal">Cymbal</div>
              <div class="instrument-label" data-instrument="o_hi_hat">Open Hi-Hat</div>
              <div class="instrument-label" data-instrument="cl_hi_hat">Closed Hi-Hat</div>
              <div class="instrument-label" data-instrument="low_conga">Low Conga</div>
              <div class="instrument-label" data-instrument="mid_conga">Mid Conga</div>
              <div class="instrument-label" data-instrument="hi_conga">Hi Conga</div>
              <div class="instrument-label" data-instrument="claves">Claves</div>
              <div class="instrument-label" data-instrument="maracas">Maracas</div>
              <div class="instrument-label custom-sound" data-instrument="custom1">
                <span>Custom 1</span>
                <label for="custom-sound-1" class="upload-btn">Upload</label>
                <input type="file" id="custom-sound-1" class="sound-upload" accept="audio/*">
              </div>
              <div class="instrument-label custom-sound" data-instrument="custom2">
                <span>Custom 2</span>
                <label for="custom-sound-2" class="upload-btn">Upload</label>
                <input type="file" id="custom-sound-2" class="sound-upload" accept="audio/*">
              </div>
            </div>
            
            <div class="grid-container">
              <div class="grid" id="beat-grid"></div>
              <div class="panel-blinker"></div>
            </div>
          </div>
          
          <!-- Mobile Pattern Navigation -->
          <div class="mobile-grid-navigation">
            <div class="beat-page-indicator">
              <span class="current-page">1</span>/<span class="total-pages">2</span>
            </div>
            <div class="beat-navigation-controls">
              <button class="nav-btn prev-page">‚óÄ</button>
              <button class="nav-btn next-page">‚ñ∂</button>
            </div>
          </div>
        </div>
        
        <!-- Effects Module -->
        <div class="module-container effects-module">
          <h2 class="module-title">Audio Effects</h2>
          <div class="effects-panel">
            <div class="effect-group">
              <div class="effect-label">Delay</div>
              <div class="effect-controls">
                <div class="slider-control">
                  <div class="slider-label">Time</div>
                  <input type="range" min="0" max="100" value="0" class="effect-slider" id="delay-time">
                  <div class="slider-value" id="delay-time-value">0 ms</div>
                </div>
                <div class="slider-control">
                  <div class="slider-label">Feedback</div>
                  <input type="range" min="0" max="100" value="0" class="effect-slider" id="delay-feedback">
                  <div class="slider-value" id="delay-feedback-value">0%</div>
                </div>
                <div class="effect-toggle">
                  <label class="toggle">
                    <input type="checkbox" id="delay-active">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
            </div>
            
            <div class="effect-group">
              <div class="effect-label">Reverb</div>
              <div class="effect-controls">
                <div class="slider-control">
                  <div class="slider-label">Size</div>
                  <input type="range" min="0" max="100" value="0" class="effect-slider" id="reverb-size">
                  <div class="slider-value" id="reverb-size-value">0%</div>
                </div>
                <div class="slider-control">
                  <div class="slider-label">Mix</div>
                  <input type="range" min="0" max="100" value="0" class="effect-slider" id="reverb-mix">
                  <div class="slider-value" id="reverb-mix-value">0%</div>
                </div>
                <div class="effect-toggle">
                  <label class="toggle">
                    <input type="checkbox" id="reverb-active">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
            </div>

            <div class="effect-group">
              <div class="effect-label">Filter</div>
              <div class="effect-controls">
                <div class="slider-control">
                  <div class="slider-label">Cutoff</div>
                  <input type="range" min="20" max="20000" value="20000" class="effect-slider log-scale" id="filter-cutoff">
                  <div class="slider-value" id="filter-cutoff-value">20000 Hz</div>
                </div>
                <div class="slider-control">
                  <div class="slider-label">Resonance</div>
                  <input type="range" min="0" max="100" value="0" class="effect-slider" id="filter-q">
                  <div class="slider-value" id="filter-q-value">0</div>
                </div>
                <div class="effect-toggle">
                  <label class="toggle">
                    <input type="checkbox" id="filter-active">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
            </div>

            <div class="effect-group">
              <div class="effect-label">Compression</div>
              <div class="effect-controls">
                <div class="slider-control">
                  <div class="slider-label">Threshold</div>
                  <input type="range" min="-60" max="0" value="0" class="effect-slider" id="comp-threshold">
                  <div class="slider-value" id="comp-threshold-value">0 dB</div>
                </div>
                <div class="slider-control">
                  <div class="slider-label">Ratio</div>
                  <input type="range" min="1" max="20" value="1" class="effect-slider" id="comp-ratio">
                  <div class="slider-value" id="comp-ratio-value">1:1</div>
                </div>
                <div class="effect-toggle">
                  <label class="toggle">
                    <input type="checkbox" id="comp-active">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- MIDI Keyboard Module -->
        <div class="module-container keyboard-module">
          <h2 class="module-title">MIDI Keyboard</h2>
          <div class="keyboard-controls">
            <div class="preset-selector">
              <div class="preset-label">Sound</div>
              <select id="keyboard-preset" class="option-select">
                <option value="synth">Synth Lead</option>
                <option value="bass">Bass</option>
                <option value="piano">E-Piano</option>
                <option value="pad">Pad</option>
                <option value="pluck">Pluck</option>
              </select>
            </div>
            <div class="octave-controls">
              <div class="octave-label">Octave</div>
              <div class="octave-buttons">
                <button id="octave-down" class="control-btn">-</button>
                <span id="octave-display" class="octave-display">4</span>
                <button id="octave-up" class="control-btn">+</button>
              </div>
            </div>
            <div class="keyboard-options">
              <label class="option-checkbox">
                <input type="checkbox" id="keyboard-hold">
                <span class="checkbox-label">Hold</span>
              </label>
            </div>
          </div>
          
          <div class="midi-keyboard" id="midi-keyboard">
            <!-- Keys will be generated by JavaScript -->
          </div>
          
          <div class="keyboard-info">Use your computer keyboard (A-K, W-U) or click the keys to play. Press Z/X to change octaves.</div>
        </div>
        
        <!-- Section Controls -->
        <div class="section-controls">
          <h2 class="module-title">Section Management</h2>
          <div class="section-control-buttons">
            <button id="copy-section" class="control-btn wide">Copy Section</button>
            <button id="paste-section" class="control-btn wide">Paste Section</button>
            <select id="section-select" class="option-select">
              <option value="main">Main</option>
              <option value="intro">Intro</option>
              <option value="verse">Verse</option>
              <option value="chorus">Chorus</option>
              <option value="outro">Outro</option>
            </select>
          </div>
        </div>

        <!-- Sequencer Timeline -->
        <div class="sequencer-timeline">
          <h2 class="module-title">Sequence Arrangement</h2>
          <div class="timeline-container">
            <div class="timeline-section intro">Intro</div>
            <div class="timeline-section verse">Verse</div>
            <div class="timeline-section chorus">Chorus</div>
            <div class="timeline-section verse">Verse</div>
            <div class="timeline-section chorus">Chorus</div>
            <div class="timeline-section outro">Outro</div>
          </div>
          <button id="play-sequence" class="control-btn wide primary">Play Sequence</button>
        </div>
      </div>

      <!-- Interface Footer -->
      <div class="interface-footer">
        <div class="footer-line"></div>
        <div class="footer-content">
          <div class="footer-text">Inspire Beat Machine ‚Ä¢ Team Inspire</div>
          <div class="footer-code">v3.0.2</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Menu Overlay (shown when mobile menu button is clicked) -->
  <div class="mobile-menu-overlay">
    <div class="mobile-menu-close">‚úï</div>
    <div class="mobile-menu-content">
      <a href="https://192.168.0.136" class="mobile-menu-item">üè† HOME</a>
      <a href="https://192.168.0.136:3000/" class="mobile-menu-item">üì° MESHTASTIC</a>
      <a href="http://192.168.0.136:1880/ui/" class="mobile-menu-item">üîÑ NODE-RED</a>
      <a href="/index.html" class="mobile-menu-item">üõ†Ô∏è TEAM TOOLS</a>
      <a href="https://192.168.0.136:8080/" class="mobile-menu-item">üóÑÔ∏è ARCHIVE</a>
      <a href="https://192.168.0.136:9000/" class="mobile-menu-item">‚öôÔ∏è ADMIN PANEL</a>
    </div>
  </div>

  <!-- Notification Container -->
  <div id="notification-container" class="notification-container"></div>

  <!-- IP Info Injection -->
  <script src="/ip-info.js"></script>
  <script src="js/index.js"></script>
</body>
</html>
